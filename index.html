<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="Ziyang&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Ziyang&#39;s Blog">
<meta property="og:locale">
<meta property="article:author" content="Zhen Ziyang">
<meta name="twitter:card" content="summary"><title>Ziyang's Blog</title><link ref="canonical" href="http://example.com/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 7.1.1"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Hello Stun</div><div class="header-banner-info__subtitle">An elegant theme for Hexo</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/29/%E3%80%90%E8%AF%BB%E4%B9%A6%E3%80%91%E7%81%AB%E7%AE%AD%E7%A7%91%E5%AD%A6%E5%AE%B6%E4%B8%80%E6%A0%B7%E6%80%9D%E8%80%83/">【读书】像火箭科学家一样思考</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-29</span></span></div></header><div class="post-body"><div class="post-excerpt"><blockquote>
<p>学习还可以消除失败带来的耻辱感。“对付不开心的最好办法，就是学习一些东西。这是唯一屡试不爽的方法。你会变老，身体颤抖；你可能晚上睡不着，听着静脉紊乱的声音；你可能会怀念自己的挚爱；你可能会看到周围的世界被邪恶的疯子摧毁，或者知道你的荣誉被卑劣的人践踏。这时候，你只有一件事可以做，那就是学习，了解世事为何及如何变迁。”作家T.H.White 写道</p>
</blockquote>
<blockquote>
<p>他们将失败转化为胜利，把束缚转化为优势；他们认为小事故只是可以解决的难题，而非不可逾越的障碍；他们前进的动力不是盲目的信念，而是自我怀疑 ；他们的目标不是短期结果,而是长期突破;他们知道规则不是一成不变的,已设定的东西可以更改,他们能开辟出一条新的路径。 当别人看到重重困难时，你们看到的却是各种机遇，想使现实服从你们的意愿。你们将理性的处理问题，制定创新的解决方案，重新定义现状。 为何减法而非加法是创意的关键</p>
</blockquote>
<blockquote>
<p>We choose to go to the moon in this decade not because they are easy，but because they are hard！</p>
</blockquote>
<p><img src="/images/%E7%81%AB%E7%AE%AD%E7%A7%91%E5%AD%A6.png" alt="2"><br>这本书拯救了我焦虑的情绪。半年前我曾站在人生的岔路口，国内经济异常低迷，互联网行业通篇是裁员的新闻。同门本来同我一样签了某外企大厂，但一则延期入职一年的新闻让他不得不和下一届一起参加秋招。这让我突然惊恐起来，对未来的不确定性感到焦虑。毕竟一旦被裁，户口也拿不到了。一边是确定性的稳定工作，一边是多年来的dream offer。</p>

        <h1 id="第一章-拥抱不确定性。"   >
          <a href="#第一章-拥抱不确定性。" class="heading-link"><i class="fas fa-link"></i></a><a href="#第一章-拥抱不确定性。" class="headerlink" title="第一章 拥抱不确定性。"></a>第一章 拥抱不确定性。</h1>
      <p>千百年前，追求不确定性的人类祖先可能因为好奇被剑齿虎吃掉，以至于这么多年以后的人类在生理上就是对确定性趋之若鹜的。承认自己内心对确定性的向往，但也要有自己主观意愿上的追求与思考。<br><img src="/images/nasa.png" alt="1"></p>

        <h1 id="第二章"   >
          <a href="#第二章" class="heading-link"><i class="fas fa-link"></i></a><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h1>
      <p>有人问，你会为自己的选择后悔吗。讲实话后悔过，但我不会花任何一分钟的时间去内耗与自责。我为自己所有深思熟虑、权衡利弊的选择负责。未来的我会更坚定的行走在路上，狂野一望无际，但通往天竺的路始终在我心里。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/29/%E3%80%90%E8%AF%BB%E4%B9%A6%E3%80%91%E3%80%8A%E5%8A%A8%E7%89%A9%E5%86%9C%E5%9C%BA%E3%80%8B/">【读书】《动物农场》</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-29</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>这本书花了三天的时间看完的。第一天读的时候正好赶上年后返乡。当天暴雪封路，好多高铁都停运、晚点，我在返京的高铁站拉着箱子吹着冷风等了三个小时。</p>
<p><img src="/images/%E5%8A%A8%E7%89%A9%E5%86%9C%E5%9C%BA.png" alt="1"></p>
<p>不知道是工作以后年纪增长了还是工作原因，突然对政治和经济很感兴趣。不过再感兴趣也耐不住底子薄，对很多事情也是一知半解。</p>
<p>故事里除了猪和一匹年龄很大的马以外，几乎没有坚持阅读、书写，学会独立思考的动物们，他们面对暴力与专治展现出的是极致的温顺。但他们心中也是有信念的，也是向往自由的，但这份信念却让他们轻而易举的被猪们剥削的淋漓尽致。当然，不可置否的是，之前在人掌管农场的时候，他们也是被剥削的。由此看来，阶级还是会在不同性质的农场若有若无的存在着，不同的是游戏规则发生了略微改变而已。</p>
<p>奥维尔的原意是揭露苏联社会主义的真实面目，在强权统治下，谈论共产主义的劳动创造共同价值，实现“自由王国”的可能性微乎其微。从古至今，阶级斗争永无止尽。</p>
<p>这本书用动物农场发生的革命故事来讽刺政治。一开始看的时候嘴角上扬，到后面越看越觉得脊背发凉。有论者说。“多一个人看奥维尔，就多了一份自由的保障”，希望大家都可以掌握独立思考的能力，阅读真的很有必要。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/29/%E3%80%90Java%E3%80%91SpringBoot%E7%83%AD%E9%83%A8%E7%BD%B2/">JVM热部署,热加载与源码解读</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-03-02</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="名词与解释"   >
          <a href="#名词与解释" class="heading-link"><i class="fas fa-link"></i></a><a href="#名词与解释" class="headerlink" title="名词与解释"></a>名词与解释</h1>
      
        <h2 id="加载与部署"   >
          <a href="#加载与部署" class="heading-link"><i class="fas fa-link"></i></a><a href="#加载与部署" class="headerlink" title="加载与部署"></a>加载与部署</h2>
      <p><strong>加载</strong>Loading：</p>
<ul>
<li>原理：将程序或数据从存储设备读取到内存。涉及内容：给程序分配内存空间，将机器码和数据加载到分配的空间中。</li>
</ul>
<p><strong>部署</strong>Deployment：</p>
<ul>
<li>将已编译的机器码（可执行文件）和任何必要的库或依赖项放置到目标系统或服务器</li>
</ul>

        <h2 id="编译型语言和解释型语言"   >
          <a href="#编译型语言和解释型语言" class="heading-link"><i class="fas fa-link"></i></a><a href="#编译型语言和解释型语言" class="headerlink" title="编译型语言和解释型语言"></a>编译型语言和解释型语言</h2>
      <p>这是两种不同的执行方式。</p>
<p><strong>解释性</strong>Interpretation：</p>
<ul>
<li>程序运行时逐行或逐块被解释器直接执行&#x2F;在程序运行时动态地被解释和执行。python or js.</li>
</ul>
<p><strong>编译型</strong>Compilation：</p>
<ul>
<li>运行前事先编译成机器码.c, c++, go</li>
</ul>
<p>注意这里说的是机器码而不是字节码。字节码不直接针对特定的硬件架构。字节码通常由编译器从高级语言源代码编译得到，然后可以由虚拟机解释执行或进一步编译成机器码。一般Java，.Net，Python有字节码</p>
<p>那Java属于什么类型语言？Java通常被认为同时具有编译型和解释型语言的特点： - 编译型特点：Java源代码（.java文件）首先被Java编译器编译成字节码（.class文件） - 解释型特点：JVM中的解释器对Java代码进行解释。</p>

        <h2 id="热部署"   >
          <a href="#热部署" class="heading-link"><i class="fas fa-link"></i></a><a href="#热部署" class="headerlink" title="热部署"></a>热部署</h2>
      <p>热部署主要依赖于JVM的类加载（Class Loading）机制以及能够动态管理和替换类定义的能力。在Java平台上，热部署允许开发者在应用程序运行时更新和替换特定的类或资源，而无需停止和重启整个应用服务器。</p>
<p>有人说在容器中是没办法实现热部署或者热加载的?  其实，在容器中实现热部署或热加载是完全可能的: Docker环境下，可以通过挂载卷（Docker Volumes）来实现实时重载（Live-reload）; 在Kubernetes环境下，使用DevSpace这样的工具可以更加高效地实现热部署和热加载。</p>

        <h3 id="原理"   >
          <a href="#原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#原理" class="headerlink" title="原理"></a>原理</h3>
      
        <h3 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a href="#源码" class="headerlink" title="源码"></a>源码</h3>
      
        <h2 id="热加载"   >
          <a href="#热加载" class="heading-link"><i class="fas fa-link"></i></a><a href="#热加载" class="headerlink" title="热加载"></a>热加载</h2>
      
        <h3 id="原理-1"   >
          <a href="#原理-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3>
      
        <h3 id="源码-1"   >
          <a href="#源码-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#源码-1" class="headerlink" title="源码"></a>源码</h3>
      </div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/29/%E3%80%90%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%BC%95%E6%93%8E%E3%80%91%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BC%80%E6%BA%90%E6%A1%88%E4%BE%8B/">基于SpringBoot的低代码平台</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-03-02</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="低代码简介"   >
          <a href="#低代码简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#低代码简介" class="headerlink" title="低代码简介"></a>低代码简介</h1>
      
        <h2 id="意义"   >
          <a href="#意义" class="heading-link"><i class="fas fa-link"></i></a><a href="#意义" class="headerlink" title="意义"></a>意义</h2>
      <blockquote>
<p>低代码引擎的核心是设计器，通过扩展、周边生态等可以产出各式各样的设计器。它不是一套可以适合所有人的低代码平台，而是帮助低代码平台的开发者，快速生产低代码平台的工具。</p>
</blockquote>
<p>低代码引擎包括前端代码相关的以及后端例如Java相关的代码平台。</p>

        <h2 id="Erupt"   >
          <a href="#Erupt" class="heading-link"><i class="fas fa-link"></i></a><a href="#Erupt" class="headerlink" title="Erupt"></a>Erupt</h2>
      <p>Erupt是一个基于Java的低代码平台，它不是通过自动生成Java代码来实现功能，而是使用Java注解（Annotations）来动态生成后台管理系统的页面和功能。这种方法使得开发者不需要编写前端代码或是手动创建数据库表结构，极大地简化了开发流程和提高了开发效率。</p>
<p>Erupt 不是通过自动生成CRUD的Java代码来实现其功能的。相反，它采用一种基于注解的方法，通过在Java实体类上使用注解来定义如何对数据进行增删改查操作，以及如何在用户界面上展示这些数据。这种方法避免了传统的代码生成器所带来的代码冗余和后续维护困难的问题。</p>
<p>具体来说，开发者只需定义数据模型，并使用Erupt提供的注解来标注这些模型，Erupt框架会自动解析这些注解，并生成相应的后台管理界面，包括数据列表、表单等，以及对应的增删改查逻辑。这一过程完全自动化，极大地简化了后台管理系统的开发工作。</p>
<p>例如，通过使用@Erupt注解标注一个实体类，然后在类的字段上使用@EruptField注解来定义字段的属性和展示方式，Erupt就能根据这些信息自动构建出一个完整的数据管理界面，无需开发者编写任何额外的HTML、JavaScript代码或SQL脚本。</p>
<p>这种基于注解的方法使得Erupt非常适合快速开发需要常规数据管理功能的后台管理系统，同时也提供了足够的灵活性来支持更复杂的业务需求。</p>

        <h3 id="多表联动查询的CRUD"   >
          <a href="#多表联动查询的CRUD" class="heading-link"><i class="fas fa-link"></i></a><a href="#多表联动查询的CRUD" class="headerlink" title="多表联动查询的CRUD"></a>多表联动查询的CRUD</h3>
      
        <h1 id="市面上常用低代码引擎分析"   >
          <a href="#市面上常用低代码引擎分析" class="heading-link"><i class="fas fa-link"></i></a><a href="#市面上常用低代码引擎分析" class="headerlink" title="市面上常用低代码引擎分析"></a>市面上常用低代码引擎分析</h1>
      <p>可见这篇文章：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://golden.com/wiki/No-code_%2F_low-code_development-NMGMEA6" >No-code&#x2F;low-code</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/%E5%A6%82%E4%BD%95%E4%B8%8D%E5%81%9A%E5%B1%80%E5%A4%96%E4%BA%BA/">如何own好项目，不做局外人</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-29</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>事情的起因是最近在工作中，由于颇受领导重视，被分配了一个小组重点开展的项目去做。</p>
<p>这个项目一共有五、六个人一起开发，由于我负责的那块相对封闭，逻辑和大家负责的部分没太多关联。因此对于大家负责的模块一知半解。后续在项目需求开发快结束时，领导突然说让我去own整个项目，既进行代码开发也肩负起小项目管理的角色。</p>
<p>其实我之前也有做整个项目的<em>代码走查</em>，但由于很少帮助其他模块的同事开发，刚入职半年帮其他同事review代码的次数一只手能数得过来，而且也只review了和自己负责的小模块相关的同事的代码。几乎没有任何技术影响力。对项目的运维信息、上线信息也没有积极跟进，都是由一位资深架构师去跟进的。例如项目的资源申请、内存是否够用，cpu核数是否需要再申请等等。本人由于主动性不够，除了我负责的工作以外开发的代码逻辑不够多，范围覆盖面较小。后续一些模块迭代需求的时候，PM找的都是之前负责的同事而不是自己。所以一个月以后，我没有很好的own这个项目，反而和需求有些脱轨，俨然变成了一个局外人。</p>
<p>后来经历了自我反思，并与行业大佬交流后，了解了一些正确own项目的案例故事。例如某应届生同样也是刚刚工作半年，被leader分配去接手一个项目，很快就可以own的很好云云。抽象出他们的共同点，可以供诸君借鉴：</p>
<ol>
<li><p>技术是基本，只有自己技术好才能更好的帮助别人。</p>
</li>
<li><p>乐于助人，主动去review或者走查别人的代码逻辑。主动发现问题！发现需求</p>
</li>
<li><p>刚接手一个项目时，可以写一个OnePage文档。OnePage文档里包括：</p>
<pre><code> - 功能
 - 代码架构图
 - 代码走查看
 - 项目的运维信息
 - launch文档
</code></pre>
</li>
<li><p>代码不是唯一需要考虑的。这一点很重要。我刚入职的时候每天的重点就是手头里的这点需求，就想着怎么更好的开发完，没有站在整个项目的角度上看事情。大到这个项目目前的战略目标，和业务方的沟通到了那个进度了，这个迭代的所有需求是什么，下个迭代要干什么。小到这次上线有哪些数据的变动，项目的机器参数是什么等等。领导问出一个细节问题可以立刻回答出来。</p>
</li>
<li><p>出现每个部署、测试问题，都积极跟进修复进度，并尽量可以做到快速定位问题原因。</p>
</li>
</ol>
<p>其实也有人说，要学会自洽，不是所有人都需要去当owner的，责任越大越辛苦。但我认为，我的自洽就是不断地反思与学习。目前的阶段是锻炼自己技术影响力的很好机会，刚入职这半年，这点欠缺的不少，希望接下来可以不断重塑自己。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/%E3%80%906-824%E3%80%91MapReduce/">【6.824】MapReduce</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-28</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Paper-main-idea"   >
          <a href="#Paper-main-idea" class="heading-link"><i class="fas fa-link"></i></a><a href="#Paper-main-idea" class="headerlink" title="Paper main idea"></a>Paper main idea</h1>
      <p><img src="/images/map_reduce.png"></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Figure 1 shows the overall flow of a MapReduce operation in our implementation. When the user program calls the MapReduce function, the following sequence of actions occurs (the numbered labels in Figure 1 correspond to the numbers in the list below): </span><br><span class="line"></span><br><span class="line">1. The MapReduce library in the user program first splits the input files into M pieces of typically 16 megabytes to 64 megabytes (MB) per piece (controllable by the user via an optional parameter). It then starts up many copies of the program on a cluster of machines. </span><br><span class="line"></span><br><span class="line">2. One of the copies of the program is special – the master. The rest are workers that are assigned work by the master. There are M map tasks and R reduce tasks to assign. The master picks idle workers and assigns each one a map task or a reduce task. </span><br><span class="line"></span><br><span class="line">3. A worker who is assigned a map task reads the contents of the corresponding input split. It parses key/value pairs out of the input data and passes each pair to the user-defined Map function. The intermediate key/value pairs produced by the Map function are buffered in memory</span><br><span class="line"></span><br><span class="line">4. Periodically, the buffered pairs are written to local disk, partitioned into R regions by the partitioning function. The locations of these buffered pairs on the local disk are passed back to the master, who is responsible for forwarding these locations to the reduce workers. </span><br><span class="line"></span><br><span class="line">5. When a reduce worker is notified by the master about these locations, it uses remote procedure calls to read the buffered data from the local disks of the map workers. When a reduce worker has read all intermediate data, it sorts it by the intermediate keys so that all occurrences of the same key are grouped together. The sorting is needed because typically many different keys map to the same reduce task. If the amount of intermediate data is too large to fit in memory, an external sort is used. </span><br><span class="line"></span><br><span class="line">6. The reduce worker iterates over the sorted intermediate data and for each unique intermediate key encountered, it passes the key and the corresponding set of intermediate values to the user&#x27;s Reduce function. The output of the Reduce function is appended to a final output file for this reduce partition</span><br><span class="line"></span><br><span class="line">7. When all map tasks and reduce tasks have been completed, the master wakes up the user program. At this point, the MapReduce call in the user program returns back to the user code.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h1 id="论文的youtube讲解"   >
          <a href="#论文的youtube讲解" class="heading-link"><i class="fas fa-link"></i></a><a href="#论文的youtube讲解" class="headerlink" title="论文的youtube讲解"></a>论文的youtube讲解</h1>
      <p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.google.com/search?q=map+reduce+bilibili&sca_esv=573962864&biw=1527&bih=744&tbm=vid&sxsrf=AM9HkKmLsPQM2n0qHvQp-24bArEzuViXPQ:1697548678192&ei=hokuZZSsC8HO1e8PrN2EsA8&ved=0ahUKEwiUh8_Plf2BAxVBZ_UHHawuAfYQ4dUDCA0&uact=5&oq=map+reduce+bilibili&gs_lp=Eg1nd3Mtd2l6LXZpZGVvIhNtYXAgcmVkdWNlIGJpbGliaWxpMggQABiJBRiiBDIFEAAYogQyCBAAGIkFGKIESP8OUK0BWJYNcAB4AJABAJgByQKgAY0SqgEHMC4yLjcuMbgBA8gBAPgBAcICBBAjGCfCAggQABjLARiABMICBRAAGIAEwgIHEAAYigUYQ8ICCBAAGB4YDxgKwgIIEAAYCBgeGArCAggQABgIGB4YE8ICBxAhGKABGAqIBgE&sclient=gws-wiz-video#fpstate=ive&vld=cid:b5108df6,vid:Rz8JCS9TfOQ,st:0" >https://www.google.com/search?q=map+reduce+bilibili&amp;sca_esv=573962864&amp;biw=1527&amp;bih=744&amp;tbm=vid&amp;sxsrf=AM9HkKmLsPQM2n0qHvQp-24bArEzuViXPQ%3A1697548678192&amp;ei=hokuZZSsC8HO1e8PrN2EsA8&amp;ved=0ahUKEwiUh8_Plf2BAxVBZ_UHHawuAfYQ4dUDCA0&amp;uact=5&amp;oq=map+reduce+bilibili&amp;gs_lp=Eg1nd3Mtd2l6LXZpZGVvIhNtYXAgcmVkdWNlIGJpbGliaWxpMggQABiJBRiiBDIFEAAYogQyCBAAGIkFGKIESP8OUK0BWJYNcAB4AJABAJgByQKgAY0SqgEHMC4yLjcuMbgBA8gBAPgBAcICBBAjGCfCAggQABjLARiABMICBRAAGIAEwgIHEAAYigUYQ8ICCBAAGB4YDxgKwgIIEAAYCBgeGArCAggQABgIGB4YE8ICBxAhGKABGAqIBgE&amp;sclient=gws-wiz-video#fpstate=ive&amp;vld=cid:b5108df6,vid:Rz8JCS9TfOQ,st:0</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="some-ideas"   >
          <a href="#some-ideas" class="heading-link"><i class="fas fa-link"></i></a><a href="#some-ideas" class="headerlink" title="some ideas"></a>some ideas</h1>
      
        <h2 id="Task-Synchronous"   >
          <a href="#Task-Synchronous" class="heading-link"><i class="fas fa-link"></i></a><a href="#Task-Synchronous" class="headerlink" title="Task Synchronous:"></a>Task Synchronous:</h2>
      <p>all map task should be earlier than reduce task! </p>
<p>some map task may wait seconds, so should first all map tasks done before reduce.</p>

        <h2 id="Lock"   >
          <a href="#Lock" class="heading-link"><i class="fas fa-link"></i></a><a href="#Lock" class="headerlink" title="Lock:"></a>Lock:</h2>
      <p>workers run parallel, should add mutex to filelist when </p>

        <h2 id="Error-Return"   >
          <a href="#Error-Return" class="heading-link"><i class="fas fa-link"></i></a><a href="#Error-Return" class="headerlink" title="Error Return:"></a>Error Return:</h2>
      <p>workers may run some error, such as <code>rpc sock connect</code> and <code>can not open files</code>. When these errors happend, should return <code>Error</code> to master, other than just stop itself.</p>

        <h2 id="Heartbeat"   >
          <a href="#Heartbeat" class="heading-link"><i class="fas fa-link"></i></a><a href="#Heartbeat" class="headerlink" title="Heartbeat:"></a>Heartbeat:</h2>
      <p>master should ask workers whether they are alive.</p>
<p>Implementation method:</p>
<ol>
<li>Set a new scheduled task and ask every 2 minutes.</li>
<li>Every time a new worker requests a new task, add a judgment when rotating all tasks to assign tasks to the worker. If a task status is not Finish and times out, the task fails</li>
<li>Write in the <code>Done()</code> method and continuously rotate to ensure that all tasks are completed. And take the opportunity to determine if there is a task timeout.</li>
</ol>
<p>Performance comparison: 1&gt;2&gt;3</p>
<p>Judging by frequency. The execution frequency of 3 is too high, constantly executing and discussing the sequence.</p>

        <h1 id="status-of-task-and-worker"   >
          <a href="#status-of-task-and-worker" class="heading-link"><i class="fas fa-link"></i></a><a href="#status-of-task-and-worker" class="headerlink" title="status of task and worker"></a>status of task and worker</h1>
      <p>worker: </p>
<ul>
<li>Finish: worker finish task X</li>
<li>Ready: worker ask for a new task</li>
<li>Wrong: worker meet some problems</li>
<li>Close: worker will be closed when master ask worker to close</li>
</ul>
<p>task:</p>
<ul>
<li>Run: some worker is running on this task</li>
<li>Done: this task is finished</li>
<li>(empty string): task not be allocated yet</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/raft/">【6.824】raft</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-28</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="共识算法raft"   >
          <a href="#共识算法raft" class="heading-link"><i class="fas fa-link"></i></a><a href="#共识算法raft" class="headerlink" title="共识算法raft"></a>共识算法raft</h1>
      <blockquote>
<p>Consensus is a fundamental problem in fault-tolerant distributed systems，Consensus involves multiple servers agreeing on values</p>
</blockquote>
<p>共识是容错的一个基本问题。共识算法解决的是分布式系统对某个提案（Proposal），集群中所有节点都达成一致意见的过程</p>

        <h1 id="raft是什么"   >
          <a href="#raft是什么" class="heading-link"><i class="fas fa-link"></i></a><a href="#raft是什么" class="headerlink" title="raft是什么"></a>raft是什么</h1>
      <p>raft算是一种共识算法，解决了一个分布式集群如何达成同意values的问题</p>
<p><img src="/images/raft_ini.png"></p>
<blockquote>
<p>etcd Raft 模块设计实现上抽象了网络、存储、日志等模块，它本身并不会进行网络、存储相关的操作，上层应用需结合自己业务场景选择内置的模块或自定义实现网络、存储、日志等模块。唐聪，《etcd 实战课》</p>
</blockquote>

        <h1 id="复制状态机（Replicated-state-machines）"   >
          <a href="#复制状态机（Replicated-state-machines）" class="heading-link"><i class="fas fa-link"></i></a><a href="#复制状态机（Replicated-state-machines）" class="headerlink" title="复制状态机（Replicated state machines）"></a>复制状态机（Replicated state machines）</h1>
      <ul>
<li>约定存储的是日志</li>
</ul>

        <h1 id="raft共识算法实现"   >
          <a href="#raft共识算法实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#raft共识算法实现" class="headerlink" title="raft共识算法实现"></a>raft共识算法实现</h1>
      
        <h2 id="0-可视化链接："   >
          <a href="#0-可视化链接：" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-可视化链接：" class="headerlink" title="0. 可视化链接："></a>0. 可视化链接：</h2>
      <p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://thesecretlivesofdata.com/raft/" >https://thesecretlivesofdata.com/raft/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="1-节点状态（Server-states）"   >
          <a href="#1-节点状态（Server-states）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-节点状态（Server-states）" class="headerlink" title="1. 节点状态（Server states）"></a>1. 节点状态（Server states）</h2>
      <p>每个节点只会有三种状态，leader, follower, 或者 candidate.</p>

        <h2 id="2-任期"   >
          <a href="#2-任期" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-任期" class="headerlink" title="2. 任期"></a>2. 任期</h2>
      <p>Raft 里的逻辑时钟，从 0 开始，随着每次选举的发起而递增</p>

        <h2 id="3-RPCs"   >
          <a href="#3-RPCs" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-RPCs" class="headerlink" title="3. RPCs"></a>3. RPCs</h2>
      <p>节点之间的通讯方式，最基础的共识算法，只需要两种 </p>
<ol>
<li>RPC，RequestVote RPCs </li>
<li>AppendEntries RPCs</li>
</ol>

        <h1 id="步骤"   >
          <a href="#步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1>
      
        <h2 id="1-Leader-Election"   >
          <a href="#1-Leader-Election" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Leader-Election" class="headerlink" title="1. Leader Election"></a>1. Leader Election</h2>
      
        <h3 id="名词定义"   >
          <a href="#名词定义" class="heading-link"><i class="fas fa-link"></i></a><a href="#名词定义" class="headerlink" title="名词定义"></a>名词定义</h3>
      <ol>
<li><p>Append Entries: leader -&gt; followers, follower reply</p>
</li>
<li><p>Term: 是什么，何时增加修改？</p>
</li>
</ol>
<blockquote>
<p>raft divides time into terms of arbitrary length</p>
</blockquote>
<p>如果有leader，那么所有的节点维护的term是一致的。否则，在竞选状态时，以高的term为大，谁的term高谁的话语权高</p>
<blockquote>
<p>tips: 相同term下，如果有的candidate a term_a 比 candidate b term_b来的早(term_a &lt; term&lt;b ), 那可能会投票给term_a而不是term_b</p>
</blockquote>

        <h3 id="基本思路"   >
          <a href="#基本思路" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h3>
      <p>下面是完成的表格，展示了在Raft协议中，leader、candidate和follower在接收到RequestVote和AppendEntry请求时的行为，取决于请求中的term与节点当前的term的比较：</p>
<div class="table-container"><table>
<thead>
<tr>
<th></th>
<th>RequsestVote</th>
<th></th>
<th></th>
<th>AppendEntry</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>req.term&gt;currentTerm</td>
<td>req.term&#x3D;currentTerm</td>
<td>req.term&lt;currentTerm</td>
<td>req.term&gt;currentTerm</td>
<td>req.term&#x3D;currentTerm</td>
<td>req.term&lt; currentTerm</td>
</tr>
<tr>
<td>leader</td>
<td>变为follower，更新term，重新评估投票</td>
<td>false (拒绝投票)</td>
<td>false (拒绝投票)</td>
<td>变为follower，更新term</td>
<td>忽略请求</td>
<td>忽略请求</td>
</tr>
<tr>
<td>candidate</td>
<td>变为follower，更新term，重新评估投票</td>
<td>false (拒绝投票)</td>
<td>false (拒绝投票)</td>
<td>变为follower，更新term</td>
<td>变为follower，接受来自leader的消息</td>
<td>忽略请求</td>
</tr>
<tr>
<td>follower</td>
<td>更新term，没投票则投票，否则拒绝</td>
<td>没投票则投票，否则拒绝</td>
<td>false (拒绝投票)</td>
<td>更新term，接受新leader</td>
<td>接受来自leader的消息</td>
<td>忽略请求</td>
</tr>
</tbody></table></div>
<ul>
<li>leader send heartbeat RPCs no more than ten times per second.</li>
</ul>
<figure class="highlight go"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// return currentTerm and whether this server</span></span><br><span class="line"><span class="comment">// believes it is the leader.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rf *Raft)</span></span> GetState() (<span class="type">int</span>, <span class="type">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rf *Raft)</span></span> sendRequestVote(server <span class="type">int</span>, args *RequestVoteArgs, reply *RequestVoteReply) <span class="type">bool</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">beginElection</span><span class="params">()</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>批量发选票，批量收获所有的结果。如果结果中true的票数 &gt; false的票数，它就成功变成leader</p>
</li>
<li><p>candidate时处理其他leader发来的心跳信息，是自己变成follower还是继续candidate？此时candidate的term肯定是大于老leader的term的</p>
</li>
<li><p>如果新leader收到老leader的心跳信息，会怎么样呢？</p>
</li>
<li><p>follower投票完还会变成candidate吗：会，自己超时后也会开启投票</p>
</li>
<li><p>follower在收到心跳信息后，会重新计时判断心跳的实现逻辑：</p>
</li>
</ul>
<p>在时间等待前后判断currentLeader是否是-1</p>
<figure class="highlight go"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rf *Raft)</span></span> tickerAsFollower() &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">// 判断是否超时，转换状态</span></span><br><span class="line">		rf.currentLeader = <span class="number">-1</span></span><br><span class="line">		ms := <span class="number">500</span> + (rand.Int63() % <span class="number">400</span>)</span><br><span class="line">		time.Sleep(time.Duration(ms) * time.Millisecond)</span><br><span class="line">		DPrintf(<span class="string">&quot;[%d,%d] is follower, leader : %d&quot;</span>, rf.me, rf.currentTerm, rf.currentLeader)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> rf.currentLeader == <span class="number">-1</span> &#123;</span><br><span class="line">			rf.state = <span class="number">1</span></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h3 id="特殊情况"   >
          <a href="#特殊情况" class="heading-link"><i class="fas fa-link"></i></a><a href="#特殊情况" class="headerlink" title="特殊情况"></a>特殊情况</h3>
      <ol>
<li>split vote:</li>
</ol>
<p>要考虑到，有的follower如果失联，这时判断split vote时就不能只判断是否是peers个数的一半了。</p>
<ol start="2">
<li>同一个term内先后收到两个符合要求的RequestVote, 应该怎么办？</li>
</ol>
<p>答：根据first-come-first-served，给第一个投票。</p>
<blockquote>
<p>server will vote for at most one candidate in a given term, on a first-come-first-served basis</p>
</blockquote>
<p>对于第一个请求，如果其term大于follower的currentTerm，follower会更新其currentTerm为请求中的term，然后根据Raft的规则（包括日志的新旧程度等）决定是否投票。</p>
<p>对于第二个请求，如果其term大于更新后的currentTerm，follower将再次更新其currentTerm。但是，如果follower已经在更新后的任期内投了票（无论是给第一个请求的候选人还是之前的某个候选人），根据Raft协议，它不会在同一任期内投第二次票。</p>
<figure class="highlight go"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> rf.votedFor != <span class="number">-1</span> &#123;</span><br><span class="line">	DPrintf(<span class="string">&quot;【%d, %d】&lt;------x------ [%d, %d](status: %d) , already vote or leader for %d, leader %d&quot;</span>, args.CandidateId, args.Term, rf.me, rf.currentTerm, rf.state, rf.votedFor, rf.currentLeader)</span><br><span class="line">	reply.VoteGranted = <span class="literal">false</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>requstVote里广播消息时，如果某一个server消息返回超时怎么收集选票？</li>
</ol>
<p>方法一：设置ctx上下文超时机制，修改rpc的调用函数。但是这里在lab中不允许我们修改Call方法，因此弃用</p>
<p>方法二：使用go中的<code>sync.WaitGroup</code>, 开启一个广播线程时调用wg.add(1), 线程结束前采用wg.Done(), 最后wg.Wait进行阻塞，直到所有线程均返回结果。缺点：rpc失联还是会超时，因此弃用。</p>
<p>方法三：在线程调用时变判断公用的选票信息done与posVotes, 前者判断是否成为leader，后者判断是否有成为leader的条件，并置done为true。</p>

        <h2 id="2-Log-Replication"   >
          <a href="#2-Log-Replication" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Log-Replication" class="headerlink" title="2. Log Replication"></a>2. Log Replication</h2>
      <p>partition:</p>
<p>Both nodes A &amp; B will roll back their uncommitted entries and match the new leader’s log </p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/mapstruct%E6%98%A0%E5%B0%84%E5%99%A8/">mapstruct映射器</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-03-02</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="定义与意义"   >
          <a href="#定义与意义" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义与意义" class="headerlink" title="定义与意义"></a>定义与意义</h1>
      <blockquote>
<p>MapStruct是一个开源的基于Java的代码生成器，用于创建实现Java Bean之间转换的扩展映射器。使用MapStruct，我们只需要创建接口，而该库会通过注解在编译过程中自动创建具体的映射实现</p>
</blockquote>
<p>MapStruct使用注解处理器来生成映射器的实现代码.</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CapexConvert</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">CapexConvert</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(CapexConvert.class);</span><br><span class="line"></span><br><span class="line">    CapexItPageVO <span class="title function_">convertToRespVO</span><span class="params">(CapexItDO capexItDO)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="原理"   >
          <a href="#原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#原理" class="headerlink" title="原理"></a>原理</h1>
      <p>MapStruct会扫描标记了@Mapper注解的接口，并根据接口中的映射规则生成对应的映射器实现类。这些生成的映射器代码会被编译到最终的字节码中。</p>

        <h2 id="Instance"   >
          <a href="#Instance" class="heading-link"><i class="fas fa-link"></i></a><a href="#Instance" class="headerlink" title="Instance"></a>Instance</h2>
      <p>在MapStruct的映射器接口中，通常会定义一个INSTANCE常量，用于获取映射器接口的实例。</p>

        <h2 id="getMapper"   >
          <a href="#getMapper" class="heading-link"><i class="fas fa-link"></i></a><a href="#getMapper" class="headerlink" title="getMapper()"></a>getMapper()</h2>
      <p>Mapper.getMapper()函数通过反射机制来创建映射器接口的实例，使得你可以方便地使用映射器进行对象之间的映射转换。</p>

        <h2 id="编译后生成的代码"   >
          <a href="#编译后生成的代码" class="heading-link"><i class="fas fa-link"></i></a><a href="#编译后生成的代码" class="headerlink" title="编译后生成的代码"></a>编译后生成的代码</h2>
      <p>这段代码中创建了一个DoctorMapper类型的实例INSTANCE，在生成对应的实现代码后，这就是我们调用的“入口”。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="type">DoctorMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(DoctorMapper.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>这段代码告诉了实力之间的映射关系。我们构建&#x2F;编译应用程序时，MapStruct注解处理器插件会识别出DoctorMapper接口并为其生成一个实现类。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译后，生成的实现类：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoctorMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( doctor == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">DoctorDtoBuilder</span> <span class="variable">doctorDto</span> <span class="operator">=</span> DoctorDto.builder();</span><br><span class="line"></span><br><span class="line">        doctorDto.id(doctor.getId());</span><br><span class="line">        doctorDto.name(doctor.getName());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> doctorDto.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="用法"   >
          <a href="#用法" class="heading-link"><i class="fas fa-link"></i></a><a href="#用法" class="headerlink" title="用法"></a>用法</h1>
      
        <h2 id="不同属性名称"   >
          <a href="#不同属性名称" class="heading-link"><i class="fas fa-link"></i></a><a href="#不同属性名称" class="headerlink" title="不同属性名称"></a>不同属性名称</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="type">DoctorMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(DoctorMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;doctor.specialty&quot;, target = &quot;specialization&quot;)</span></span><br><span class="line">    DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h2 id="多个源"   >
          <a href="#多个源" class="heading-link"><i class="fas fa-link"></i></a><a href="#多个源" class="headerlink" title="多个源"></a>多个源</h2>
      
        <h3 id="多对多"   >
          <a href="#多对多" class="heading-link"><i class="fas fa-link"></i></a><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="type">DoctorMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(DoctorMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;doctor.specialty&quot;, target = &quot;specialization&quot;)</span></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;education.degreeName&quot;, target = &quot;degree&quot;)</span></span><br><span class="line">    DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor, Education education)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="子对象映射（集合）"   >
          <a href="#子对象映射（集合）" class="heading-link"><i class="fas fa-link"></i></a><a href="#子对象映射（集合）" class="headerlink" title="子对象映射（集合）"></a>子对象映射（集合）</h2>
      <p>POJO除了基本数据类型外，还包含其它类，比如包含一个List<OtherObject></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Doctor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String specialty;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Patient&gt; patientList;</span><br><span class="line">    <span class="comment">// getters and setters or builder</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoctorDto</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String degree;</span><br><span class="line">    <span class="keyword">private</span> String specialization;</span><br><span class="line">    <span class="keyword">private</span> List&lt;PatientDto&gt; patientDtoList;</span><br><span class="line">    <span class="comment">// getters and setters or builder</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>需要对最基本的类型进行映射，编写关于patient的映射，然后list自动依赖这个最基本的映射</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PatientMapper</span> &#123;</span><br><span class="line">    <span class="type">PatientMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(PatientMapper.class);</span><br><span class="line">    PatientDto <span class="title function_">toDto</span><span class="params">(Patient patient)</span>;</span><br><span class="line">&#125;</span><br><span class="line">然后，再来修改 DoctorMapper 处理一下患者列表：</span><br><span class="line"><span class="meta">@Mapper(uses = &#123;PatientMapper.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="type">DoctorMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(DoctorMapper.class);</span><br><span class="line">    <span class="meta">@Mapping(source = &quot;doctor.patientList&quot;, target = &quot;patientDtoList&quot;)</span></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;doctor.specialty&quot;, target = &quot;specialization&quot;)</span></span><br><span class="line">    DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor)</span>;</span><br><span class="line">&#125;</span><br><span class="line">原理：（编译后的代码）</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoctorMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">DoctorMapper</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">PatientMapper</span> <span class="variable">patientMapper</span> <span class="operator">=</span> Mappers.getMapper( PatientMapper.class );</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> DoctorDto <span class="title function_">toDto</span><span class="params">(Doctor doctor)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( doctor == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">DoctorDtoBuilder</span> <span class="variable">doctorDto</span> <span class="operator">=</span> DoctorDto.builder();</span><br><span class="line">        doctorDto.patientDtoList( patientListToPatientDtoList(doctor.getPatientList()));</span><br><span class="line">        doctorDto.specialization( doctor.getSpecialty() );</span><br><span class="line">        doctorDto.id( doctor.getId() );</span><br><span class="line">        doctorDto.name( doctor.getName() );</span><br><span class="line">        <span class="keyword">return</span> doctorDto.build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> List&lt;PatientDto&gt; <span class="title function_">patientListToPatientDtoList</span><span class="params">(List&lt;Patient&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( list == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;PatientDto&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;PatientDto&gt;( list.size() );</span><br><span class="line">        <span class="keyword">for</span> ( Patient patient : list ) &#123;</span><br><span class="line">            list1.add( patientMapper.toDto( patient ) );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="日期转换"   >
          <a href="#日期转换" class="heading-link"><i class="fas fa-link"></i></a><a href="#日期转换" class="headerlink" title="日期转换"></a>日期转换</h2>
      <p>除此之外，不同基本数据类型之间可以转换。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LocalDate转String:</span></span><br><span class="line"><span class="meta">@Mapping(source = &quot;dateOfBirth&quot;, target = &quot;dateOfBirth&quot;, dateFormat = &quot;dd/MMM/yyyy&quot;)</span></span><br><span class="line">Patient <span class="title function_">toModel</span><span class="params">(PatientDto patientDto)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字格式转换示例</span></span><br><span class="line">   <span class="meta">@Mapping(source = &quot;price&quot;, target = &quot;price&quot;, numberFormat = &quot;$#.00&quot;)</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="枚举映射"   >
          <a href="#枚举映射" class="heading-link"><i class="fas fa-link"></i></a><a href="#枚举映射" class="headerlink" title="枚举映射"></a>枚举映射</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">PaymentType</span> &#123;</span><br><span class="line">    CASH,</span><br><span class="line">    CHEQUE,</span><br><span class="line">    CARD_VISA,</span><br><span class="line">    CARD_MASTER,</span><br><span class="line">    CARD_CREDIT</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">PaymentTypeView</span> &#123;</span><br><span class="line">    CASH,</span><br><span class="line">    CHEQUE,</span><br><span class="line">    CARD</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PaymentTypeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">PaymentTypeMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(PaymentTypeMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ValueMappings(&#123;</span></span><br><span class="line"><span class="meta">            @ValueMapping(source = &quot;CARD_VISA&quot;, target = &quot;CARD&quot;),</span></span><br><span class="line"><span class="meta">            @ValueMapping(source = &quot;CARD_MASTER&quot;, target = &quot;CARD&quot;),</span></span><br><span class="line"><span class="meta">            @ValueMapping(source = &quot;CARD_CREDIT&quot;, target = &quot;CARD&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    PaymentTypeView <span class="title function_">paymentTypeToPaymentTypeView</span><span class="params">(PaymentType paymentType)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>参考：<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/368731266" >链接</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/java%E5%BC%82%E5%B8%B8%E8%A7%A3%E6%9E%90/">java异常解析</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-28</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><a href="/images/1280X1280.PNG">图</a></p>

        <h1 id="原理"   >
          <a href="#原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#原理" class="headerlink" title="原理"></a>原理</h1>
      
        <h2 id="结构解释"   >
          <a href="#结构解释" class="heading-link"><i class="fas fa-link"></i></a><a href="#结构解释" class="headerlink" title="结构解释"></a>结构解释</h2>
      <p>Throwable Java中所有的异常类都继承自它，角色在异常的领域中和Object一样；需要捕获所有异常时可以使用catch(Throwable e)进行捕获</p>

        <h2 id="1-error"   >
          <a href="#1-error" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-error" class="headerlink" title="1 error"></a>1 error</h2>
      <p>Error 表示Java运行时系统(JVM)用于指示与运行时环境本身(JRE)有关的错误。它的子类常用有OutOfMemoryError StackOverFlowError</p>

        <h2 id="2-exception"   >
          <a href="#2-exception" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-exception" class="headerlink" title="2 exception"></a>2 exception</h2>
      <p>Exception 它表示程序可能捕捉的异常或者程序可以处理的异常。可以分成检查性异常和非检查性（RuntimeException）异常</p>

        <h3 id="2-1-检查性异常"   >
          <a href="#2-1-检查性异常" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-1-检查性异常" class="headerlink" title="2.1 检查性异常"></a>2.1 检查性异常</h3>
      <p>编译时必须进行处理的异常。要求程序员在代码中显式地处理这些异常。例如，IOException、SQLException等。不处理编辑器会报错。</p>

        <h3 id="2-2-非检查异常（运行时异常）"   >
          <a href="#2-2-非检查异常（运行时异常）" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-2-非检查异常（运行时异常）" class="headerlink" title="2.2 非检查异常（运行时异常）"></a>2.2 非检查异常（运行时异常）</h3>
      <p>例如，NullPointerException、ArrayIndexOutOfBoundsException等。</p>
<p>RuntimeException 运行时异常，它是Exception的子类；是一个特殊的检查异常，调用者可以忽略不处理这个异常，交给</p>
<p>上面的调用者或者全局进行捕获处理；继承自RuntimeException的异常可以不用throws关键字在方法上进行标示也能通过编译，但通常不建议这样做。</p>

        <h1 id="捕获原理"   >
          <a href="#捕获原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#捕获原理" class="headerlink" title="捕获原理"></a>捕获原理</h1>
      <p>根据类型捕获的：异常是通过继承关系进行分类的。当抛出异常时，会检查异常的类型和catch块的声明类型是否匹配。如果异常的类型是catch块声明的类型或其子类型，就会执行对应的catch块中的代码。如果是自定义的异常类，你可以查看它的定义和继承关系。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2024/02/28/%E3%80%90%E8%B4%A2%E5%8A%A1%E6%8A%A5%E8%A1%A8%E3%80%91%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/">【财务报表】简单介绍</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2024-02-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2024-02-28</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="The-role-of-financial-reporting-and-FSA"   >
          <a href="#The-role-of-financial-reporting-and-FSA" class="heading-link"><i class="fas fa-link"></i></a><a href="#The-role-of-financial-reporting-and-FSA" class="headerlink" title="The role of financial reporting and FSA"></a>The role of financial reporting and FSA</h1>
      <p>B&#x2F;S balance sheet</p>
<p>I&#x2F;S  income statement</p>
<p>CF cash flow</p>
<p>RE, retained earning</p>
<p>NI, net income</p>
<p>AR：Accrual Receivable应收帐款</p>
<p>AP</p>
<p>double entry 复式记账法</p>
<p>Accrual basis权责发生制</p>
<p>Cash basis收付实现制</p>

        <h2 id="Balance-sheet"   >
          <a href="#Balance-sheet" class="heading-link"><i class="fas fa-link"></i></a><a href="#Balance-sheet" class="headerlink" title="Balance sheet"></a>Balance sheet</h2>
      <ul>
<li>Asset</li>
<li>Liability</li>
<li>equity</li>
</ul>

        <h2 id="Income-statement"   >
          <a href="#Income-statement" class="heading-link"><i class="fas fa-link"></i></a><a href="#Income-statement" class="headerlink" title="Income statement"></a>Income statement</h2>
      <ul>
<li>revenue</li>
<li>expense</li>
<li>other income</li>
</ul>

        <h2 id="cash-flow-statement"   >
          <a href="#cash-flow-statement" class="heading-link"><i class="fas fa-link"></i></a><a href="#cash-flow-statement" class="headerlink" title="cash flow statement"></a>cash flow statement</h2>
      <ul>
<li>operating cash flow经营<ul>
<li>销售得到的资产</li>
</ul>
</li>
<li>investing cash flow投资<ul>
<li>处置固定资产</li>
</ul>
</li>
<li>financing cash flow融资<ul>
<li>发行Bond债</li>
<li>到期还本金</li>
</ul>
</li>
</ul>

        <h2 id="权责发生制accrual-basis的四大账户"   >
          <a href="#权责发生制accrual-basis的四大账户" class="heading-link"><i class="fas fa-link"></i></a><a href="#权责发生制accrual-basis的四大账户" class="headerlink" title="权责发生制accrual basis的四大账户"></a>权责发生制accrual basis的四大账户</h2>
      <p>accrual receivable应收账款（asset）</p>
<p>prepaid expense预付款（asset）</p>
<p>accrual payable应付账款（liability）</p>
<p>unearned revenue预售转狂（liability）</p>

        <h1 id="financial-statement-element"   >
          <a href="#financial-statement-element" class="heading-link"><i class="fas fa-link"></i></a><a href="#financial-statement-element" class="headerlink" title="financial statement element"></a>financial statement element</h1>
      <p>contra account 备抵账户</p>

        <h2 id="asset"   >
          <a href="#asset" class="heading-link"><i class="fas fa-link"></i></a><a href="#asset" class="headerlink" title="asset"></a>asset</h2>
      <p><strong>current asset：</strong></p>
<p>cash and cash equivalents</p>
<p>accounts receivable</p>
<p>inventory</p>
<p>financial asset</p>
<p>HTM：持有至到期投资（债券）</p>
<p>AFS可供出售金融资产：&lt;1年的才是流动资产</p>
<p>trading交易金融资产</p>
<p>prepaid expense</p>
<p>非流动性：</p>
<p>property, plant and equipment机器厂房与设备</p>
<p>investment in affiliates 联营投资</p>
<p>investment property 投资性房地产（rent or capital appreciation资产增值）</p>
<p>intangible asset 无形资产</p>

        <h2 id="liability"   >
          <a href="#liability" class="heading-link"><i class="fas fa-link"></i></a><a href="#liability" class="headerlink" title="liability"></a><strong>liability</strong></h2>
      <p><strong>current:</strong></p>
<ul>
<li>account payable应付账款</li>
<li>financial liabilities (应付票据:短期note payable)</li>
<li>unearned revenue预收账款</li>
<li>accrual liabilities(expense) 应计费用</li>
<li>income tax payable</li>
</ul>
<p>非流动性：</p>
<ul>
<li>long term dept</li>
<li>deferred tax liabilities</li>
</ul>

        <h2 id="equity"   >
          <a href="#equity" class="heading-link"><i class="fas fa-link"></i></a><a href="#equity" class="headerlink" title="equity"></a>equity</h2>
      <p>capital</p>
<p>additional paid-in capital 资本公积金，股本溢价</p>
<p>retained earnings留存收益(没有作为股息进行分配）</p>
<p>other comprehensive income其他综合收益</p>
<ul>
<li>foreign currency translation 汇兑损益</li>
<li>pension liability adjustment养老金（defined benefit)</li>
<li>unrealized gains and losses from cash flow hedging derivative套利保值衍生品。 汇率现金流（有OCI）</li>
<li>unrealized gains and losses from available or sale（长期）</li>
</ul>

        <h2 id="expenses"   >
          <a href="#expenses" class="heading-link"><i class="fas fa-link"></i></a><a href="#expenses" class="headerlink" title="expenses"></a>expenses</h2>
      <p>cost and goods sold:COGS 生产成本，</p>
<p>selling general and administrative expenses SG&amp;A间接费用</p>
<p>depreciation and amortization 折旧与摊销 D&amp;A</p>
<p>Tax expenses 利息费用</p>
<p>losses</p>
<p>EBIT 息税前利润</p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">Hello Stun</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">12</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2024</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Zhen Ziyang</span><span class="footer__devider">|</span><span></span></div><div><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.0</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">Visitors</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">Views</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script></body></html>